(function(t){function e(e){for(var r,i,s=e[0],l=e[1],c=e[2],d=0,f=[];d<s.length;d++)i=s[d],o[i]&&f.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(f.length)f.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,s=1;s<a.length;s++){var l=a[s];0!==o[l]&&(r=!1)}r&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},o={app:0},n=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"025e":function(t,e){t.exports.dateFormat=function(t){if(!t)return null;t=new Date(t);var e=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),o=t.getHours(),n=t.getMinutes(),i=t.getSeconds(),s=o%12||12,l=n<10?"0"+n:n,c=o<12?" am":" pm";return e+"-"+a+"-"+r+" "+s+":"+l+":"+i+c},t.exports.apiBaseUrl="http://10.0.1.80:8880/cms/"},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),o=(a("d1e7"),a("f309"));a("bf40");r["a"].use(o["a"]);var n=new o["a"]({icons:{iconfont:"md"}}),i=a("bc3a"),s=a.n(i),l=a("2f62"),c=a("025e"),u=a.n(c);r["a"].use(l["a"]);var d=new l["a"].Store({state:{status:"",token:localStorage.getItem("token")||"",refresh_token:localStorage.getItem("refresh_token")||"",user:{}},getters:{isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status}},mutations:{auth_request:function(t){t.status="loading"},auth_success:function(t,e,a,r){t.status="success",t.token=e,t.refresh_token=a,t.user=r},auth_error:function(t){t.status="error"},logout:function(t){t.status="",t.token="",t.refresh_token=""}},actions:{register:function(t,e){var a=t.commit;return new Promise(function(t,r){a("auth_request"),s()({url:u.a.apiBaseUrl+"authentication/register",data:e,method:"POST"}).then(function(e){var r=e.data.data.accessToken,o=e.data.data.refreshToken,n=e.data.data;localStorage.setItem("token",r),localStorage.setItem("refresh_token",o),s.a.defaults.headers.common.Authorization=r,a("auth_success",r,o,n),t(e)}).catch(function(t){a("auth_error",t),localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),r(t)})})},login:function(t,e){var a=t.commit;return new Promise(function(t,r){a("auth_request"),s()({url:u.a.apiBaseUrl+"authentication/login",data:e,method:"POST"}).then(function(e){var r=e.data.data.accessToken,o=e.data.data.refreshToken,n=e.data.data;localStorage.setItem("token",r),localStorage.setItem("refresh_token",o),s.a.defaults.headers.common.Authorization=r,a("auth_success",r,o,n),t(e),window.location.href="/"}).catch(function(t){a("auth_error"),localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),r(t)})})},logout:function(t){var e=t.commit;return new Promise(function(t,a){e("logout"),localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),delete s.a.defaults.headers.common.Authorization,t()})}}}),f=a("8c4f"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("v-app",{attrs:{id:"inspire"}},[a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{dark:""}},[a("v-toolbar-title",[t._v("Login")]),a("v-spacer")],1),a("v-card-text",[a("v-form",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{"prepend-icon":"place",name:"email",label:"Email",type:"text","error-messages":t.errors.collect("email")},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:5",expression:"'required|min:5'"}],attrs:{"prepend-icon":"lock",name:"password",label:"Password",id:"password",type:"password","error-messages":t.errors.collect("password")},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{dark:""},on:{click:t.login}},[t._v("Login")])],1),a("v-alert",{attrs:{value:t.error,type:"error"}},[t._v(t._s(this.error))])],1)],1)],1)],1)],1)],1)],1)},p=[],h=a("7bb1");r["a"].use(h["a"]);var v={data:function(){return{form:{email:"",password:""},error:""}},methods:{login:function(){var t=this;this.$validator.validate().then(function(e){if(e){var a=t.form.email;t.form.password;localStorage.setItem("token",a),localStorage.setItem("refresh_token",a),window.location.href="/"}})}}},g=v,b=a("2877"),w=a("6544"),_=a.n(w),x=a("0798"),k=a("7496"),y=a("8336"),V=a("b0af"),S=a("99d9"),I=a("a523"),L=a("a75b"),$=a("0e8f"),C=a("4bd4"),T=a("a722"),O=a("2fa4"),A=a("8654"),P=a("71d9"),j=a("2a7f"),q=Object(b["a"])(g,m,p,!1,null,null,null),D=q.exports;_()(q,{VAlert:x["a"],VApp:k["a"],VBtn:y["a"],VCard:V["a"],VCardActions:S["a"],VCardText:S["b"],VContainer:I["a"],VContent:L["a"],VFlex:$["a"],VForm:C["a"],VLayout:T["a"],VSpacer:O["a"],VTextField:A["a"],VToolbar:P["a"],VToolbarTitle:j["a"]});var F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n   Dashboard\n")])},z=[],B={},E=B,M=Object(b["a"])(E,F,z,!1,null,null,null),U=M.exports,R=new f["a"]({mode:"history",base:"/",routes:[{path:"/login",component:D,name:"login",meta:{requiresAuth:!1}},{path:"/",component:U,name:"dashboard",meta:{breadcrumb:[{text:"Dashboard",disabled:!0}]}},{path:"*",redirect:"/"}]}),N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("v-navigation-drawer",{staticClass:"lighten-4",attrs:{fixed:"",clipped:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("v-list",{attrs:{dense:""}},[t._l(t.items,function(e,a){return[e.heading?r("v-layout",{key:a,attrs:{row:"","align-center":""}},[r("v-flex",{attrs:{xs6:""}},[e.heading?r("v-subheader",[t._v("\n              "+t._s(e.heading)+"\n            ")]):t._e()],1),r("v-flex",{staticClass:"text-xs-right",attrs:{xs6:""}},[r("v-btn",{attrs:{small:"",flat:""}},[t._v("edit")])],1)],1):e.divider?r("v-divider",{key:a,staticClass:"my-3",attrs:{dark:""}}):r("v-list-item",{key:a,attrs:{to:{name:e.route}}},[r("v-list-item-icon",[r("v-icon",[t._v(t._s(e.icon))])],1),r("v-list-item-content",[r("v-list-item-title",{staticClass:"grey--text"},[t._v("\n              "+t._s(e.text)+"\n            ")])],1)],1)]})],2)],1),r("v-toolbar",{attrs:{color:"white",app:"",fixed:"","clipped-left":t.$vuetify.breakpoint.mdAndUp}},[r("span",{staticClass:"title ml-3 mr-5"},[r("img",{attrs:{src:a("cf05"),height:"40"}})]),t.isLoggedIn?r("v-list-item-title",{staticClass:"grey--text",on:{click:this.logout}},[t._v("Logout")]):t._e(),r("v-breadcrumbs",{attrs:{items:this.breadcrumbs},scopedSlots:t._u([{key:"item",fn:function(e){return[r("router-link",{class:[e.item.disabled&&"disabled"],attrs:{to:e.item.to?e.item.to:":;"}},[t._v(t._s(e.item.text.toUpperCase()))])]}}])}),r("v-spacer")],1),r("v-content",[r("v-container",{staticClass:"grey lighten-4",attrs:{fluid:"","fill-height":""}},[r("v-layout",[r("router-view")],1)],1)],1)],1)},J=[],H={name:"App",data:function(){return{drawer:null,breadcrumbs:[],items:[{icon:"dashboard",text:"Dashboard",route:"dashboard"},{icon:"person",text:"Academic Staff List",route:"academic-staff-list"},{icon:"person",text:"Fulfillment List",route:"fulfillment-list"},{icon:"category",text:"Rooms",route:"rooms"},{icon:"ballot",text:"Lessons",route:"lessons"},{icon:"timeline",text:"Organization",route:"organization"},{icon:"poll",text:"Exam Schedule",route:"exam-schedule"}]}},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn}},watch:{$route:function(){this.breadcrumbs=this.$route.meta.breadcrumb}},created:function(){var t=this;this.breadcrumbs=this.$route.meta.breadcrumb,this.$http.interceptors.response.use(void 0,function(e){return new Promise(function(a,r){throw 401===e.status&&e.config&&!e.config.__isRetryRequest&&t.$store.dispatch(logout),e})})},methods:{logout:function(){this.$store.dispatch("logout").then(function(){window.location.href="/login"})}}},Y=H,G=(a("5c0b"),a("2bc5")),K=a("ce7e"),Q=a("132d"),W=a("8860"),X=a("da13"),Z=a("5d23"),tt=a("34c3"),et=a("f774"),at=a("e0c7"),rt=Object(b["a"])(Y,N,J,!1,null,null,null),ot=rt.exports;_()(rt,{VApp:k["a"],VBreadcrumbs:G["a"],VBtn:y["a"],VContainer:I["a"],VContent:L["a"],VDivider:K["a"],VFlex:$["a"],VIcon:Q["a"],VLayout:T["a"],VList:W["a"],VListItem:X["a"],VListItemContent:Z["a"],VListItemIcon:tt["a"],VListItemTitle:Z["b"],VNavigationDrawer:et["a"],VSpacer:O["a"],VSubheader:at["a"],VToolbar:P["a"]}),window.utils=u.a,r["a"].use(f["a"],s.a,h["a"]),r["a"].config.productionTip=!1,r["a"].prototype.$http=s.a;var nt=localStorage.getItem("token"),it=localStorage.getItem("refresh_token");nt&&(r["a"].prototype.$http.defaults.headers.common.Authorization=nt,r["a"].prototype.$http.defaults.headers.common.RefreshToken=it);var st=ot;R.beforeEach(function(t,e,a){if("/login"==t.path){if(d.getters.isLoggedIn)return void(window.location.href="/");st=D}if(void 0==t.meta.requiresAuth&&t.matched.some(function(t){return!t.meta.requiresAuth})){if(d.getters.isLoggedIn)return void a();window.location.href="/login"}else a()});var lt=new r["a"]({render:function(t){return t(st)},router:R,vuetify:n,store:d}).$mount("#app");e["default"]=lt},"5c0b":function(t,e,a){"use strict";var r=a("6879"),o=a.n(r);o.a},6879:function(t,e,a){},cf05:function(t,e,a){t.exports=a.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.470da48b.js.map